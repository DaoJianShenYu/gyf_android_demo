# android程序员之框架了解入门  
　　选择框架时要选择功能单一的框架,这样在使用的时候比较灵活,另外最好选择`last commit`时间超过1年的框架,以及有大量`issues`,并且issues均被fix的框架,`星星`越多越好.

## Dragger2
　　在日常使用中,当我们在A类中new出一个B类对象时,我们的A类就对B类产生了依赖,这个时候如果B类的构造方法更改了,A类中new的操作就要相应的修改,在超大型的大几十万行代码以上的项目当中,可能会在很多地方对B类产生依赖,这时候就需要去寻找并改动整个项目中的各个地方,为了避免这种情况,就有了Dagger2框架,一种依赖注入的框架,将new的操作通过**控制反转**的方式进行了解耦.

　　这是一种编译时的注入框架,在实际运行时不使用反射,效率有表征,而且不影响后期项目的混淆操作.  

　　我们用`Dragger2`创建对象,就要先创建`Component类`和`Moduel类`,这里的`Component类`是用来指定要对哪个类进行注入,例如`A类`，`Moduel类`是用来进行具体的new对象操作的,这样new对象的操作统一在`Moduel类`中做就行了,这样在`A类`中,我们只有要用注解注入在Moduel中创建的对象就行了.

　　不过这种依赖注入只能处理构造方法被修改的情况,如果觉得类名定义的不合适,连类名都要进行修改的话,仍旧需要个各个地方去修改类名,不过这方式将new的操作从类中解耦出来了,然后在编译的时候再重新生成java代码,一定成都上方便了代码的后期维护.

## AndroidAnnotations
`AndroidAnnotations`是一种非常丰富的集合框架,里面替我们定义好了一整套注解,在使用AndroidAnnotations的时候,我们的所写的`MainActivity类`只是替`AndroidAnnotations框架`提供源代码的,框架会根据我们所编写的`MainActivity类`去生成一个`MainActivity_类`(就是多了一条下划线),`MainActivity_`这个类才是真正要去`AndroidManifest.xml`中配置的组件,不仅是Activity组件可以这样,Service组件可以,用这种方式去定义后,对于很多重复的操作就只要用注解来表示即可,例如初始化布局,切换线程等各种操作,   那些重复的代码,`AndroidAnnotations`都会根据注解在下划线类中进行生成,最终的下划线类就是一个完整的java类了,所以在运行的时候也是没有用到反射,效率有一定保证.

　　但是这种方式在大型项目中并不适用,虽然前期编写时方便了,但是会导致后期维护比较麻烦,一个类用到注入后,整个类都必须要用注解的方式进行书写.

## ButterKnife
　　这是android大神之一的JakWharton所写的框架,用于进行布局的初始化,用注解的方式进行初始化,和XUtils类似,不过XUtils用的是运行时注解,ButterKnife用的是编译时注解,而且ButterKnife还有AndroidStudio插件,可以可视化操作一键注入,现在是一款使用比较频繁的布局初始化注入框架.
　　不过ButterKnife对代码的简化还是比较有限的,而且其有很多局限性,这种注入式框架说是对性能没有影响,但是追求效率的人有时候还是介意的.

## LayoutCreator
　　这是一款不出名的布局初始化注入框架，其采用的原理是将代码直接生成出来，将像使用studio提供的模板一样直接生成一段段代码,生成的是findViewById的原始代码,所以是毋庸置疑的效率最高的布局注入框架了,而且不需要进行依赖,只要安装插件即可在studio中使用,当然目前和ButterKnife一样,还是只能在Activity,Fragment或者Adapter中使用,但我目前正在协同作者将这种框架进行完善.

## Volley
　　Volley是一款擅长小文件频繁请求网络的框架,它的底层用的是httpClient,所以在android22以后需要在gradle中强制添加使用apache库的代码.在使用Volley的时候需要使用一个`VolleyFactory`的工厂类来辅助Volley的使用,保证使用的是Volley的单例对象.

　　Volley在底层中维护了一个网络请求队列,我们只需用通过Volley提供的api向Volley中添加网络请求任务即可,Volley会自动管理网络请求任务,任务的启动由Volley框架来操作,当然我们也可以进行手动干预,为网络请求任务设置优先级.

　　Volley中也提供一个imageLoader功能类,不过其功能比较弱,不建议使用.

## okhttp
　　是一种比较可靠的网络请求框架,底层用socket建立连接,提供网络异常多ip重试功能,对大文件的稳定下载很重要,不过okhttp的异步请求的回调没有给我们封装好,需要自己进行线程的切换,不过有配套的OKHttpUtils可以使用.

## Retrofit框架
　　是一种封装的很好的网络框架,这个框架的网络请求速度比其它框架快3~十几倍,不过其对网络数据的传输格式有一定的要求,在解析网络请求的时候,`Retrofit`框架需要我们提供java数据模型,因为它会把网络数据流直接转为java bean对象,不过有相应的在线生成工具可以使用,这种转换功能后期再结合RXJava进行使用是很强大的,这种转换在解析xml数据的时候是很有用的,比XStream要好.

　　另外Retrofit在配置url路径参数的时候比较麻烦,需要分段配置.

## UIL (androidUniversalImageLoader)
　　是最早的开源图像加载框架,这个框架在加载圆式图片的时候需要指定的imageView的大小,这样子图片才能显示,另外`LoaderImage`和`displayImage`这两种加载方式的区别是,前一种可以添加监听器,对图片加载是否完成进行监听回调,而后者则不可以.

　　因为UIL是过于老的一个图片加载框架,所以现在一般不怎么使用.

## Fresco
　　是FaceBook开源的图片加载框架,用这个框架的图片加载控件可以直接在布局文件中进行大量属性的配置,这一点是比较好的.

　　另外fresco可以加载gif图,这个是比较特殊的功能,其它可以加载gif图的框架还有Glide.

　　除此之外,Fresco还可以进行独特的渐进式图片加载,,即在图片未完全下载完就先加载模糊的图片,让图片由模糊到清晰进行渐进式加载.

## Picasso

　　是**Square公司**开源的图片加载框架,这个框架是使用比较简单,最少 可以只传三个参数就完成一个图片的加载操作.
　　不过在进行一些特殊效果的图片加载时,其设置方式就稍微不简洁一些了.

　　picasso默认使用的Bitmap8888压缩策略,所以图片的加载质量还是比较高的.

## Glide

　　Glided的使用方法也是比较简单的,最少可以传三个参数就完成网络图片的加载,其它特殊效果图片的设置也和Picasso类似,不过Glide默认使用Bitmap565的压缩策略,加载的图片清晰度要稍差一些,不过Glide的图像加载速度要快一点,另外Glide的压缩策略可以通过一定的配置进行修改.

### 图片加载框架的推荐

　　在多图情况下Fresco＞Glide＞Picasso
　　如果追求加载快,就使用Glide,如果追求质量高,就使用Picasso.
